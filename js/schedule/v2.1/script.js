'use strict';let app=new Vue({el:'#app',data:{group:'in171',schedule:null,parity:'numerator',subGroup:'subGroup2',date:null,timing:null,minutes:[],timer:''},methods:{getSchedule:function(){axios.get(this.group+'.json').then(b=>{this.schedule=b.data[this.parity][this.subGroup],this.timing=b.data.timing,this.redirect()});let a={group:this.group,subGroup:this.subGroup};localStorage.setItem('scheduleParams',JSON.stringify(a))},getWeek:function(){let a=new Date,b=new Date(a.getFullYear(),0,1);return Math.ceil(((a-b)/8.64e7+b.getDay()+1)/7)},getMinutes:function(){let a=this.timing.monday.join(',').split(','),b=[];a.forEach(function(c){let d=c.split(':');b.push(60*parseInt(d[0])+parseInt(d[1]))}),this.minutes=b},getNumClass:function(){1>this.minutes.length&&this.getMinutes.call(this);let a=new Date,b=this.min,c=[0].concat(this.minutes),d=c[0]-b,e=-1;for(let f=0;f<c.length-1;f++)b>=c[f]&b<c[f+1]&&(e=f,d=c[f+1]-b);this.timer=-1<e?['\u0414\u043E \u043D\u0430\u0447\u0430\u043B\u0430 ','\u0414\u043E \u043A\u043E\u043D\u0446\u0430 '][e%2]+' '+((e-e%2)/2+1)+'-\u043E\u0439 \u043F\u0430\u0440\u044B '+d+' \u043C\u0438\u043D.':'\u041F\u0430\u0440\u044B \u0437\u0430\u043A\u043E\u043D\u0447\u0438\u043B\u0438\u0441\u044C'},redirect:function(){let a=new Date().toLocaleString('en',{weekday:'long'});window.location.replace('#'+a.toLowerCase())}},watch:{subGroup:function(){this.getSchedule()},parity:function(){this.getSchedule()},group:function(){this.getSchedule()}},created:function(){let a=JSON.parse(window.localStorage.getItem('scheduleParams'));a&&(this.group=a.group,this.subGroup=a.subGroup),this.parity=1==this.getWeek()%2?'denominator':'numerator',this.date=new Date().toLocaleString('ru',{weekday:'long',month:'numeric',day:'numeric'}),this.getSchedule(),setInterval(function(){this.getNumClass.call(this)}.bind(this),500)}});
